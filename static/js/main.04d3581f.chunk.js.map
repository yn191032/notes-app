{"version":3,"sources":["contexts/note/NoteContext.js","db/database.js","db/helpers.js","db/repositories/notesRepository.js","db/index.js","contexts/note/NoteProvider.js","contexts/note/useNoteContext.js","contexts/undo/UndoContext.js","contexts/undo/UndoProvider.js","contexts/undo/useUndo.js","components/App/theme.js","components/Layout.js","hooks/useGetParam.js","hooks/useMakeLink.js","components/Popup/styles.js","components/Popup/components/PopupBase.js","components/Popup/constants.js","components/Popup/components/popups/RenameFolder.js","components/Popup/hooks/useRenameFolder.js","components/Popup/index.js","components/Popup/components/ShowPopup.js","components/Undo/styles.js","components/Undo/components/Undo.js","components/Undo/index.js","components/Undo/components/UndoList.js","components/FomatDate.js","screens/Notes/components/NoteList/styles.js","screens/Notes/components/NoteList/NoteList.js","screens/Notes/components/FolderList/styles.js","screens/Notes/components/FolderList/FolderList.js","screens/Notes/components/AddButton/styles.js","screens/Notes/components/AddButton/AddButton.js","screens/Notes/components/NotesScreen/NotesScreen.js","screens/Notes/hooks/useNotesList.js","screens/Editor/hooks/useOneNote.js","screens/Editor/components/EditorScreen/styles.js","screens/Editor/components/EditorScreen/EditorScreen.js","components/Router/Router.js","components/App/App.js","serviceWorker.js","index.js"],"names":["NoteContext","createContext","db","dbName","version","stores","notes","table","on","process","Dexie","sortByDate","arr","sort","a","b","moment","date","diff","getDate","format","createOne","folder","content","add","id","console","log","get","Number","note","list","toArray","length","listOneFolder","where","equals","reverse","listFolders","orderBy","uniqueKeys","folders","remove","delete","update","values","NoteProvider","children","useState","setNotes","makeUndo","useUndo","useEffect","refresh","createNote","updateNote","noteId","Provider","value","removeNote","filter","message","onDo","onUndo","useNoteContext","ctx","useContext","Error","UndoContext","UndoProvider","undos","setUndos","removeFromUndos","timerId","prev","undo","newUndo","startTimeMS","Date","getTime","setTimeout","timerDelay","getProgress","partialValue","totalValue","remainingTime","Math","round","cancel","clearTimeout","undefined","colors","theme","createMuiTheme","palette","primary","main","secondary","overrides","MuiSnackbarContent","display","alignItems","padding","MuiMenu","MuiMenuItem","root","paddingTop","paddingBottom","minHeight","MuiListItem","backgroundColor","color","fontWeight","MuiListItemIcon","minWidth","paddingRight","MuiFormControl","marginBottom","Layout","className","useGetParam","name","search","useLocation","URLSearchParams","useMakeLink","config","match","useRouteMatch","location","to","hash","state","query","pushToQuery","isRelative","pathname","url","Object","keys","entries","forEach","key","set","existingValue","arrayValue","split","push","toString","useStyles","makeStyles","popupTitle","position","popupContent","Transition","React","forwardRef","props","ref","Slide","direction","PopupBase","open","history","useHistory","classes","Dialog","onClose","goBack","TransitionComponent","DialogContent","Container","popups","input","useRef","updateNoteFolder","useRenameFolder","TextField","label","autoFocus","type","fullWidth","inputRef","defaultValue","Button","disableElevation","variant","onClick","current","replace","Popup","popupName","Boolean","flexDirection","justifyContent","zIndex","left","right","bottom","item","width","marginTop","progress","marginRight","UndoItem","cancelAction","timerRef","setOpen","setProgress","setInterval","currentProgress","clearInterval","Snackbar","CircularProgress","size","thickness","action","IconButton","aria-label","fontSize","Undo","map","FormatDate","borderTop","itemText","margin","title","loading","textAlign","noData","textTransform","bookIcon","height","NoteList","onRemove","List","ListItem","component","Link","ListItemIcon","ListItemText","substr","ListItemSecondaryAction","wrapper","overflow","inner","addIcon","paddingLeft","itemIcon","itemMenuIcon","FolderList","folderId","useParams","Chip","clickable","icon","button","appBar","AddButton","Fab","Notes","filteredNotes","setState","Set","useNotesList","noteCapture","toolbar","top","spacing","marginLeft","rendered","boxSizing","Editor","setNote","lastContent","setLastContent","currentNote","find","timer","createNewNote","updateNoteContent","useOneNote","e","target","AppBar","elevation","Toolbar","edge","disabled","endIcon","popup","style","exact","path","render","Input","multiline","placeholder","onChange","then","source","Router","App","ThemeProvider","window","hostname","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.04d3581f.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nexport const NoteContext = createContext();","import Dexie from 'dexie';\nimport initNotes from 'data/notes';\n\nclass DB extends Dexie {\n  constructor(dbName) {\n    super(dbName);\n    \n    this.version(1).stores({\n      notes: '++id, content, folder, date',\n    });\n\n    this.notes = this.table('notes');\n\n    this.on('populate', () => {\n      if (process.env.NODE_ENV === 'development') {\n        this.notes.bulkAdd(initNotes);\n      }\n    });\n  }\n}\n\nexport const db = new DB('notes_database');","import moment from 'moment';\n\nexport const sortByDate = (arr) => {\n  return arr.sort((a, b) => {\n    return moment(b.date).diff(a.date);\n  });\n};\n\nexport const getDate = () => {\n  return moment().format();\n};","import { db } from '../database';\nimport { getDate, sortByDate } from '../helpers';\n\nexport const createOne = async (folder = 'default', content = '') => {\n  const id = await db.notes.add({ \n    content,\n    folder,\n    date: getDate(),\n  });\n  console.log('repository.notes.create', id);\n  return await get(Number(id));\n};\n\nexport const get = async (id) => {\n  const note = await db.notes.get(Number(id));\n  console.log('repository.notes.get', id);\n  return note;\n};\n\nexport const list = async () => {\n  const notes = await db.notes.toArray();\n  console.log('repository.notes.list', notes.length);\n  return sortByDate(notes);\n}\n\nexport const listOneFolder = async (folder) => {\n  if (!folder) {\n    return list();\n  }\n\n  const notes = await db.notes\n    .where('folder')\n    .equals(folder)\n    .reverse()\n    .toArray();\n  \n  console.log('repository.notes.listOneFolder', notes.length);\n  return sortByDate(notes);\n};\n\nexport const listFolders = async () => {\n  const folders = await db.notes.orderBy('folder').uniqueKeys();\n  console.log('repository.notes.listFolders', folders);\n  return folders;\n};\n\nexport const remove = async (id) => {\n  console.log('repository.notes.remove', id);\n  return await db.notes.delete(Number(id));\n};\n\nexport const update = async (id, values) => {\n  await db.notes.update(Number(id), {\n    ...values,\n    date: getDate(),\n  });\n  \n  console.log('repository.notes.update', id, values);\n  return await get(Number(id));\n};\n\n\n\n\n\n\n// const test = async () => {\n//   console.log('get', await get(1));\n//   console.log('list', await list());\n//   console.log('listFolders', await listFolders());\n//   // console.log(await createOne());\n//   // (await db.notes.toArray()).map(async i => console.log((await i.format())));\n// };\n// test();\n","import * as notes from './repositories/notesRepository';\n\nexport default {\n  notes\n};","import React, { useEffect, useState } from 'react';\n\nimport { NoteContext } from './NoteContext';\nimport { useUndo } from 'contexts';\n\nimport db from 'db';\n\nexport const NoteProvider = ({ children }) => {\n  const [notes, setNotes] = useState([]);\n  const { makeUndo } = useUndo();\n\n  useEffect(() => {\n    refresh();\n  }, []);\n\n  const refresh = async () => {\n    setNotes(await db.notes.list());\n  };\n  \n  const removeNote = (noteId) => {\n    setNotes(\n      notes.filter(note => note.id !== Number(noteId))\n    );\n    makeUndo({\n      message: `Note(#${noteId}) removed.`,\n      onDo: async () => await db.notes.remove(noteId),\n      onUndo: () => refresh(),\n    });\n  };\n\n  const createNote = async () => {\n    const note = await db.notes.createOne();\n    refresh();\n    return note;\n  };\n  \n  const updateNote = async (noteId, values) => {\n    const note = await db.notes.update(noteId, values);\n    refresh();\n    return note;\n  };\n\n  return (\n    <NoteContext.Provider\n      value={{\n        notes,\n        removeNote,\n        createNote,\n        updateNote,\n      }}\n      children={children}\n    />\n  );\n};","import { useContext } from 'react';\nimport { NoteContext } from './NoteContext';\n\nexport const useNoteContext = () => {\n  const ctx = useContext(NoteContext);\n\n  if (!ctx) {\n    throw new Error('Note Context must be used within NoteProvider');\n  }\n\n  return ctx;\n};","import { createContext } from 'react';\n\nexport const UndoContext = createContext();\n","import React, { useState } from \"react\";\nimport { UndoContext } from './UndoContext';\n\nexport const UndoProvider = ({ children }) => {\n  const [undos, setUndos] = useState([]);\n\n  const removeFromUndos = (timerId) => {\n    setUndos(prev => {\n      return prev.filter(undo => undo.id !== timerId);\n    });\n  };\n\n  const makeUndo = (newUndo) => {\n    const timerDelay = 3000;\n    const animationDelay = 300;\n    const startTimeMS = (new Date()).getTime();\n\n    const timerId = setTimeout(() => {\n      newUndo.onDo();\n      removeFromUndos(timerId);\n    }, timerDelay + animationDelay);\n\n    const cancel = () => {\n      newUndo.onUndo();\n      clearTimeout(timerId);\n      removeFromUndos(timerId);\n    };\n\n    const percentage = (partialValue, totalValue) => {\n      return Math.round((100 * partialValue) / totalValue);\n   }\n\n    const getProgress = () => {\n      const remainingTime = timerDelay - ((new Date()).getTime() - startTimeMS);\n      return percentage(timerDelay - remainingTime, timerDelay);\n    };\n\n    const undo = {\n      message: newUndo.message,\n      id: timerId,\n      getProgress,\n      cancel,\n    };\n\n    setUndos(prev => [...prev, undo]);\n  };\n\n  return (\n    <UndoContext.Provider \n      children={children}\n      value={{\n        makeUndo,\n        undos,\n      }}\n    />\n  );\n};","import { useContext } from \"react\";\nimport { UndoContext } from './UndoContext';\n\nexport const useUndo = () => {\n  const ctx =  useContext(UndoContext);\n\n  if (ctx === undefined) {\n    throw new Error('Undo Context must be used within UndoProvider');\n  }\n  return ctx;\n};","import { createMuiTheme } from '@material-ui/core/styles';\n\nconst colors = {\n  primary: '#5e71d0',\n  secondary: '#ec6464',\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: colors.primary,\n    },\n    secondary: {\n      main: colors.secondary,\n    },\n  },\n  overrides: {\n    MuiSnackbarContent: {\n      message: { \n        display: 'flex',\n        alignItems: 'center',\n        padding: 0,\n      },\n    },\n    MuiMenu: {\n      list: {\n        padding: 0,\n      }\n    },\n    MuiMenuItem: {\n      root: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        minHeight: 44,\n      }\n    },\n    MuiListItem: {\n      root: {\n        \"&$selected\": {\n          backgroundColor: 'transparent',\n          color: colors.primary,\n          fontWeight: 600,\n        },\n      },\n    },\n    MuiListItemIcon: {\n      root: {\n        minWidth: 0,\n        paddingRight: 16\n      },\n    },\n    MuiFormControl: {\n      root: {\n        marginBottom: 16,\n      },\n    }\n  }\n});","import React from 'react';\n\nexport const Layout = ({ children }) => {\n  return (\n    <div className=\"app\">\n      {children}\n    </div>\n  );\n};","import { useLocation } from \"react-router-dom\";\n\nexport const useGetParam = (name) => {\n  const { search } = useLocation();\n  const query = new URLSearchParams(search);\n  return query.get(name);\n};","import { useLocation, useRouteMatch } from \"react-router-dom\";\n\nexport const useMakeLink = (config) => {\n  const match = useRouteMatch();\n  const location = useLocation();\n  \n  if (!config) {\n    return location;\n  }\n  \n  const {\n    to,\n    hash,\n    state = {},\n    query = {},\n    pushToQuery = {},\n    isRelative = false,\n  } = config;\n\n  const pathname = (match && isRelative)\n    ? `${match.url}${to}`\n    : to || location.pathname;\n\n  const search = !Object.keys(query).length\n    ? new URLSearchParams(location.search)\n    : new URLSearchParams();\n\n  Object.entries(query).forEach(([key, value]) => {\n    search.set(key, value);\n  });\n\n  Object.entries(pushToQuery).forEach(([key, value]) => {\n    const existingValue = search.get(key);\n    const arrayValue = existingValue ? existingValue.split(\",\") : [];\n    arrayValue.push(value);\n    search.set(key, arrayValue);\n  });\n\n  return {\n    pathname,\n    search: search.toString(),\n    hash,\n    state,\n  };\n};","import { makeStyles } from \"@material-ui/core\";\n\nexport const useStyles = makeStyles(() => ({\n  popupTitle: {\n    position: 'absolute',\n  },\n  popupContent: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '40px 20px !important',\n  },\n}));","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { \n  Dialog,\n  Slide,\n  Container,\n  DialogContent\n} from '@material-ui/core';\n\nimport { useStyles } from '../styles';\n\nconst Transition = React.forwardRef((props, ref) => \n  <Slide direction='up' ref={ref} {...props} />\n);\n\nexport const PopupBase = ({ open, children }) => {\n  const history = useHistory();\n  const classes = useStyles();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={history.goBack}\n      TransitionComponent={Transition}\n    >\n      <DialogContent className={classes.popupContent}>\n        <Container>\n          { children }\n        </Container>\n      </DialogContent>\n    </Dialog>\n  );\n};","import { RenameFolder } from './components/popups/RenameFolder';\n\nexport const popups = {\n  'rename-folder': RenameFolder,\n};\n","import React, { useRef } from \"react\";\nimport { \n  Button,\n  TextField\n} from \"@material-ui/core\";\n\nimport { PopupBase } from '../PopupBase';\nimport { useGetParam } from \"hooks\";\nimport { useRenameFolder } from '../../hooks/useRenameFolder';\nimport { useHistory } from \"react-router-dom\";\n\nexport const RenameFolder = ({ open }) => {\n  const input = useRef();\n  const history = useHistory();\n  const id = useGetParam('id');\n  const folder = useGetParam('folder');\n  const { updateNoteFolder } = useRenameFolder(id);\n\n  const onClick = () => {\n    updateNoteFolder(input.current.value);\n    history.replace(`/notes/${id}/edit`);\n  };\n  \n  return (\n    <PopupBase open={open}>\n      <TextField \n        label='New folder name'\n        autoFocus\n        type='text'\n        fullWidth\n        inputRef={input}\n        defaultValue={folder}\n      />\n      <Button \n        disableElevation\n        variant='contained'\n        color='primary'\n        onClick={onClick}\n      >\n        Rename\n      </Button>\n    </PopupBase>\n  );\n};","\nimport { useNoteContext } from 'contexts';\n\nexport const useRenameFolder = (noteId) => {\n  const { updateNote } = useNoteContext();\n\n  const updateNoteFolder = (folder) => {\n    updateNote(noteId, { folder })\n  };\n\n  return {\n    updateNoteFolder\n  };\n};","import { ShowPopup } from './components/ShowPopup';\n\nexport const Popup = ShowPopup;","import React from 'react';\nimport { useGetParam } from 'hooks';\nimport { popups } from '../constants';\n\nexport const ShowPopup = () => {\n  const popupName = useGetParam('popup');\n  const Popup = popups[popupName];\n\n  if (!Popup) {\n    return null;\n  }\n\n  return (\n    <Popup open={Boolean(popupName)} />\n  );\n};\n","import { makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles({\n  list: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'fixed',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1400,\n    left: 8,\n    right: 8,\n    bottom: 8,\n  },\n  item: {\n    width: '100%',\n    position: 'static',\n    marginTop: 8\n  },\n  progress: {\n    marginRight: 16\n  },\n});","import React, { useEffect } from 'react';\n\nimport {\n  Snackbar,\n  Button,\n  IconButton,\n  CircularProgress,\n} from '@material-ui/core';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useStyles } from '../styles';\n\nexport const UndoItem = ({ message, cancelAction, getProgress }) => {\n  const classes = useStyles();\n  const timerRef = React.useRef();\n  const [open, setOpen] = React.useState(true);\n  const [progress, setProgress] = React.useState(0);\n\n  const onClickClose = () => {\n    setOpen(false);\n  };\n\n  const onClickUndo = () => {\n    clearInterval(timerRef.current);\n    setOpen(true);\n    cancelAction();\n  };\n\n  useEffect(() => {\n    timerRef.current = setInterval(() => {\n      const currentProgress = getProgress();\n      if (currentProgress >= 100) {\n        setOpen(false);\n      } else {\n        setProgress(currentProgress);\n      }\n    }, 100);\n    return () => clearInterval(timerRef.current);\n  }, [getProgress]);\n\n  return (\n    <Snackbar\n      open={open}\n      className={classes.item}\n      message={\n        <>\n          <CircularProgress\n            className={classes.progress}\n            color='secondary'\n            variant=\"static\"\n            size={20}\n            thickness={4}\n            value={progress}\n          />\n          <span>{message}</span>\n        </>\n      }\n      action={\n        <>\n          <Button \n            color=\"secondary\" \n            size=\"small\" \n            onClick={onClickUndo}\n          >\n            <span>UNDO</span>\n          </Button>\n          <IconButton \n            size=\"small\" \n            aria-label=\"close\" \n            color=\"inherit\" \n            onClick={onClickClose}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </>\n      }\n    />\n  );\n};","import { UndoList } from './components/UndoList';\n\nexport const Undo = UndoList;","import React from 'react';\n\nimport { useUndo } from 'contexts';\nimport { UndoItem } from './Undo';\nimport { useStyles } from '../styles';\n\nexport const UndoList = () => {\n  const classes = useStyles();\n  const { undos } = useUndo();\n\n  return(\n    <div className={classes.list}>\n      {\n        undos.map(undo => \n          <UndoItem \n            key={undo.id} \n            message={undo.message} \n            cancelAction={undo.cancel} \n            getProgress={undo.getProgress}\n          />\n        )\n      }\n    </div>\n  );\n};","import moment from 'moment';\n\nexport const FormatDate = ({ date }) => {\n  return moment(date).to(moment());\n};","import { makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles((theme) => ({\n  list: {\n    padding: 0,\n  },\n  item: {\n    borderTop: '1px solid rgba(0,0,0,0.1)',\n    color: 'rgba(0, 0, 0, 0.8)',\n  },\n  itemText: {\n    margin: 0,\n  },\n  title: {\n    fontWeight: 600,\n    color: 'rgba(0, 0, 0, 0.7)',\n  },\n  folder: {\n    fontWeight: 600,\n    display: 'block',\n    fontSize: '0.8em',\n    color: 'rgba(0, 0, 0, 0.4)',\n  },\n  date: {\n    fontSize: '0.8em',\n    color: 'rgba(0, 0, 0, 0.4)',\n  },\n  delete: {\n    color: 'rgba(0,0,0,0.2)',\n  },\n  loading: {\n    color: 'rgba(0, 0, 0, 0.2)',\n    textAlign: 'center',\n    margin: 16\n  },\n  noData: {\n    textAlign: 'center',\n    paddingTop: 6,\n    fontWeight: 600,\n    fontSize: 14,\n    textTransform: 'uppercase',\n    color: 'rgba(0, 0, 0, 0.3)',\n  },\n  bookIcon: {\n    width: 12,\n    height: 12\n  },\n}));","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { \n  List, \n  ListItem, \n  ListItemText, \n  ListItemIcon, \n  ListItemSecondaryAction, \n  IconButton,\n  CircularProgress,\n} from '@material-ui/core';\n\nimport NotesIcon from '@material-ui/icons/Notes';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\n\nimport { FormatDate } from 'components';\n\nimport { useStyles } from './styles';\n\nexport const NoteList = ({ notes, onRemove }) => {\n  const classes = useStyles();\n  \n  return (\n    notes \n      ? notes.length < 1 ? <div className={classes.noData}>No notes</div> : \n      \n      <List className={classes.list}>\n        {\n          notes.map((note) => \n            <ListItem\n              className={classes.item}\n              key={note.id}\n              component={Link}\n              to={`/notes/${note.id}`}\n            >\n              <ListItemIcon>\n                <NotesIcon fontSize='small' />\n              </ListItemIcon>\n              <ListItemText\n                className={classes.itemText}\n                primary={\n                  <span>\n                    <span className={classes.folder}>\n                      {note.folder !== 'default'\n                        ? <><BookmarkIcon fontSize='small' className={classes.bookIcon} /> {note.folder}</> \n                        : <><BookmarkBorderIcon fontSize='small' className={classes.bookIcon} /> {note.folder}</>\n                      }\n                    </span>\n                    <span className={classes.title}>\n                      {note.content.length >= 20\n                        ? `${note.content.substr(0,20)}...`\n                        : note.content.substr(0,20)\n                      }\n                    </span>\n                  </span>\n                }\n                secondary={\n                  <span className={classes.date}>\n                    <FormatDate date={note.date} />\n                  </span>\n                }\n              />\n              <ListItemSecondaryAction>\n                <IconButton onClick={() => onRemove(note.id)}>\n                  <DeleteIcon className={classes.delete} fontSize='small' />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n          )\n        }\n      </List>\n      : <div className={classes.loading} >\n          <CircularProgress color='inherit' />\n        </div >\n  );\n};","import { makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles((theme) => ({\n  wrapper: {\n    backgroundColor: '#fff',\n    overflow: 'scroll',\n    padding: 16,\n    paddingBottom: 22,\n  },\n  inner: {\n    display: 'flex',\n  },\n  item: {\n    paddingRight: 12,\n  },\n  addIcon: {\n    width: 20, \n    paddingLeft: 5,\n  },\n  itemIcon: {\n    width: 16, \n    paddingLeft: 5,\n  },\n  itemMenuIcon: {\n    width: 22, \n    paddingLeft: 5\n  },\n}));","import React from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { \n  CircularProgress, \n  Chip, \n} from '@material-ui/core';\n\nimport BookmarksIcon from '@material-ui/icons/Bookmarks';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\n\nimport { useStyles } from './styles';\n\nexport const FolderList = ({ folders }) => {\n  const classes = useStyles();\n  const { folderId } = useParams();\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.inner}>\n\n        <div className={classes.item}>\n          <Chip\n            clickable\n            icon={<BookmarksIcon className={classes.itemIcon} />}\n            label='all notes'\n            color={!folderId ? 'secondary' : 'primary'}\n            component={Link}\n            to={`/notes/`}\n          />\n        </div>\n\n        {\n          folders \n          ? folders.map(folder => \n            <div key={folder} className={classes.item}>\n              <Chip\n                icon={\n                  folder !== 'default'\n                  ? <BookmarkIcon className={classes.itemIcon} />\n                  : <BookmarkBorderIcon className={classes.itemIcon} />\n                }\n                color={folderId === folder ? 'secondary' : 'primary'}\n                clickable\n                label={folder ? folder : 'no folder'}\n                component={Link}\n                to={`/notes/folder/${folder}`}\n                />\n            </div>\n          )\n          : <CircularProgress color='primary' size={30} />\n        }\n\n      </div>\n    </div>\n  );\n};","import { makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles(theme => ({\n  button: {\n    position: 'fixed',\n    zIndex: theme.zIndex.appBar,\n    right: 35,\n    bottom: 35,\n  },\n}));","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { Fab } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { useStyles } from './styles';\n\nexport const AddButton = () => {\n  const classes = useStyles();\n\n  return (\n    <Fab \n      color=\"primary\" \n      className={classes.button}\n      component={Link}\n      to='/notes/new'\n    >\n      <AddIcon />\n    </Fab> \n  );\n};","import React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { NoteList } from '../NoteList';\nimport { FolderList } from '../FolderList';\nimport { AddButton } from '../AddButton';\n\nimport { useNotesList } from '../../hooks/useNotesList';\n\nexport const Notes = () => {\n  const { folderId } = useParams();\n  const { notes, folders, removeNote } = useNotesList(folderId);\n\n  return (\n    <>\n      <FolderList folders={folders} />\n      <NoteList notes={notes} onRemove={removeNote} />\n      <AddButton />\n    </>\n  );\n};","import { useEffect, useState } from 'react';\nimport { useNoteContext } from 'contexts';\n\nexport const useNotesList = (folder) => {\n  const { notes, removeNote } = useNoteContext();\n  const [state, setState] = useState({\n    folders: [],\n    filteredNotes: [],\n  });\n\n  useEffect(() => {\n    console.log('useNotesList first update');\n  }, []);\n\n  useEffect(() => {\n    console.log('useNotesList updated');\n    const refresh = async () => {\n      const folders = [...new Set( notes.map(note => note.folder))];\n      const filteredNotes = folder\n          ? notes.filter(note => note.folder === folder)\n          : notes;\n      setState({ folders, filteredNotes });\n    };\n    refresh();\n\n  }, [notes, folder]);\n\n  return {\n    notes: state.filteredNotes,\n    folders: state.folders,\n    removeNote,\n  };\n};","import { useEffect, useState } from 'react';\n\nimport { useNoteContext } from 'contexts';\n\nconst noteCapture = {\n  content: '*Tap to create a note...*',\n};\n\nexport const useOneNote = (noteId) => {\n  const [note, setNote] = useState({});\n  const { notes, updateNote, removeNote, createNote } = useNoteContext();\n  const [lastContent, setLastContent] = useState('');\n  \n  useEffect(() => {\n    console.log('useOneNote first update');\n  }, []);\n\n  useEffect(() => {\n    console.log('useOneNote updated');\n\n    const currentNote = notes.find(note => note.id === Number(noteId));\n\n    (noteId && currentNote)\n      ? setNote(currentNote)\n      : setNote(noteCapture)\n\n  }, [noteId, notes]);\n\n  useEffect(() => {\n    if (!noteId) {\n      return;\n    }\n    \n    const timer = setTimeout(() => {\n      if (lastContent !== note.content) {\n        updateNote(noteId, { content: note.content });\n        setLastContent(note.content);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [note]);\n\n  const updateNoteContent = (content) => {\n    setNote({ ...note, content });\n  };\n\n  const updateNoteFolder = (folder) => {\n    updateNote(noteId, { folder })\n  };\n\n  const removeThisNote = () => {\n    removeNote(noteId);\n  };\n\n  const createNewNote = async () => {\n    const note = await createNote();\n    return note;\n  };\n  \n  return {\n    note,\n    updateNoteContent,\n    updateNoteFolder,\n    removeNote: removeThisNote,\n    createNote: createNewNote,\n  };\n};","import { makeStyles } from '@material-ui/core';\n\nexport const useStyles = makeStyles((theme) => ({\n  icon: {\n    margin: 5\n  },\n  toolbar: {\n    minHeight: 45\n  },\n  input: {\n    position: 'absolute',\n    top: 56,\n    bottom: 0,\n    padding: theme.spacing(2),\n    alignItems: 'baseline',\n  },\n  folder: {\n    margin: 5,\n    marginLeft: 'auto',\n  },\n  rendered: {\n    width: '100%',\n    boxSizing: 'border-box',\n    position: 'absolute',\n    top: 56,\n    bottom: 0,\n    padding: theme.spacing(2),\n  },\n}));","import React from 'react';\nimport { \n  Route, \n  Switch,\n  Link, \n  useHistory,\n  useRouteMatch, \n  useParams,\n} from 'react-router-dom';\n\nimport ReactMarkdown from 'react-markdown';\n\nimport { \n  IconButton,\n  Button,\n  AppBar,\n  Toolbar,\n  Input,\n  makeStyles,\n} from '@material-ui/core';\n\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\n\nimport { useMakeLink } from 'hooks';\nimport { useOneNote } from '../../hooks/useOneNote';\nimport { useStyles } from './styles';\n\nexport const Editor = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { url } = useRouteMatch();\n  const { noteId } = useParams();\n  const { note, updateNoteContent, removeNote, createNote } = useOneNote(noteId);\n\n  const update = (e) => {\n    updateNoteContent(e.target.value);\n  };\n\n  const remove = () => {\n    history.replace('/notes');\n    removeNote();\n  }\n\n  return (\n    <>\n      <AppBar \n        position='static' \n        color='default' \n        elevation={0}\n      >\n        <Toolbar className={classes.toolbar}>\n\n          <IconButton \n            className={classes.icon}\n            size='small'\n            color='inherit'\n            edge='start'\n            component={Link}\n            to={`/notes`}\n          >\n            <ArrowBackIcon />\n          </IconButton>\n\n          <Button\n            disabled={!Boolean(note.id)}\n            className={classes.folder}\n            endIcon={note.folder !== 'default' ? <BookmarkBorderIcon /> : <BookmarkIcon />}\n            color='inherit'\n            size='small'\n            component={Link}\n            to={useMakeLink({pushToQuery: {\n              popup: 'rename-folder',\n              id: note.id,\n              folder: note.folder\n            }})}\n          >\n            <span style={{ textTransform: 'none' }}>{note.folder}</span>\n          </Button>\n\n          <IconButton\n            disabled={!Boolean(note.id)}\n            className={classes.icon}\n            size='small'\n            color='inherit'\n            onClick={remove}\n          >\n            <DeleteIcon fontSize='small' />\n          </IconButton>\n\n          <IconButton\n            disabled={!Boolean(note.id)}\n            className={classes.icon} \n            size='small' \n            edge='end' \n            color='primary' \n            onClick={() => {\n              history.replace(url);\n            }}\n          >\n            <CheckCircleIcon fontSize='small' />\n          </IconButton>\n\n        </Toolbar>\n      </AppBar>\n\n      <Switch>\n        <Route exact path={`${url}/edit`} render={() => {\n          return (\n            <form>\n              <Input\n                fullWidth\n                multiline\n                autoFocus\n                placeholder='type something...'\n                className={classes.input}\n                value={note.content}\n                onChange={update}\n              />\n            </form>\n          )\n        }} />\n\n        <Route exact path={url} render={() => (\n          <div\n            className={classes.rendered} \n            onClick={() => {\n              if (!noteId) {\n                createNote().then(note => {\n                  history.replace(`/notes/${note.id}/edit`);\n                });\n                return;\n              }\n\n              history.replace(`${url}/edit`)\n            }}\n          >\n            <ReactMarkdown source={note.content} />\n          </div>\n        )} />\n      </Switch>\n    </>\n  );\n};","import React from 'react';\n\nimport {\n  Switch,\n  Route,\n  Redirect,\n  BrowserRouter,\n} from 'react-router-dom';\n\nimport { \n  Layout, \n  Popup, \n  Undo\n} from 'components';\n\nimport { Notes, Editor } from 'screens';\n\nexport const Router = () => {\n  return (\n    <BrowserRouter>\n      <Layout>\n        <Switch>\n          <Route exact path='/'>\n            <Redirect to='/notes' />\n            <Redirect to='/notes/new' />\n          </Route>\n          <Route path='/notes/folder/:folderId?' component={Notes} />\n          <Route path='/notes/new' component={Editor} />\n          <Route path='/notes/:noteId' component={Editor} />\n          <Route path='/notes' component={Notes} />\n          <Redirect to='/' />\n        </Switch>\n        <Popup />\n        <Undo />\n      </Layout>\n    </BrowserRouter>\n  );\n};","import React from 'react';\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nimport { UndoProvider, NoteProvider } from 'contexts';\nimport { theme } from './theme';\nimport { Router } from '../Router';\n\nconst App = () => {\n  return (\n    <ThemeProvider theme={theme}>\n      <UndoProvider>\n        <NoteProvider>\n          <Router />\n        </NoteProvider>\n      </UndoProvider>\n    </ThemeProvider>\n  );\n};\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}